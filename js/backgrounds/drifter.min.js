/**
* Stars
* https://codepen.io/cr0ybot/pen/zNyYeW
* Inspired by Steve Courtney's poster art for Celsius GS's Drifter - http://celsiusgs.com/drifter/posters.php
* by Cory Hughart - http://coryhughart.com
*/
function initDrifter(t,i){function h(){if(g&&(++P>=y&&(P=0),k=n(P)),m.clearRect(0,0,x.width,x.height),w>0&&(m.shadowBlur=w,m.shadowColor=f),u)for(var t=0;t<a;t++)F[t].render();if(d)for(var i=0;i<s;i++)R[i].render()}function e(){x.width=window.innerWidth*(window.devicePixelRatio||1),x.height=x.width*(x.clientHeight/x.clientWidth)}function n(t){var i=A*t,h=Math.cos(i),e=Math.sin(i),n=M;return{x:n*h,y:n*e}}function o(t,i,h){return{x:t*x.width+(x.width/2-b.x+(k.x-.5)*p)*h*c,y:i*x.height+(x.height/2-b.y+(k.y-.5)*p)*h*c}}function r(){return x.width>=x.height?x.width:x.height}function l(t,i,h){return h?Math.random()*(i-t)+t:Math.floor(Math.random()*(i-t+1))+t}var a=40,s=10,c=.05,f=i,u=!0,d=!0,w=0,g=!0,y=1e3,p=1,x=document.getElementById(t),m=x.getContext("2d"),b={x:0,y:0},v=1e3,P=0,A=2*Math.PI/y,M=100,k={x:0,y:0},z=[],I=[],q=[],F=[],R=[],W=function(){this.x=l(-.1,1.1,!0),this.y=l(-.1,1.1,!0),this.z=l(0,4),this.color=f,this.opacity=l(.1,1,!0),this.flicker=0,this.neighbors=[]};W.prototype.render=function(){var t=o(this.x,this.y,this.z),i=(.5*this.z+1)*(r()/1e3),h=this.opacity,e=l(-.5,.5,!0);this.flicker+=(e-this.flicker)/15,this.flicker>.5&&(this.flicker=.5),this.flicker<-.5&&(this.flicker=-.5),(h+=this.flicker)>1&&(h=1),h<0&&(h=0),m.fillStyle=this.color,m.globalAlpha=h,m.beginPath(),m.arc(t.x,t.y,i,0,2*Math.PI,!1),m.fill(),m.closePath(),m.globalAlpha=.05*h,m.ellipse(t.x,t.y,100*i,i,(-60-(k.x-.5)*p*c)*(Math.PI/180),0,2*Math.PI,!1),m.fill(),m.closePath(),m.globalAlpha=1};var B=function(){this.x=l(-.25,1.25,!0),this.y=l(-.25,1.25,!0),this.z=l(0,2),this.color=f,this.opacity=l(.001,.01,!0)};B.prototype.render=function(){var t=o(this.x,this.y,this.z),i=(100*this.z+100)*(r()/1e3);m.beginPath(),m.globalAlpha=this.opacity,m.arc(t.x,t.y,i,0,2*Math.PI,!1),m.fillStyle=this.color,m.fill(),m.closePath(),m.globalAlpha=1},x&&function(){var t,i;for(window.requestAnimFrame=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||function(t){window.setTimeout(t,1e3/60)},e(),b.x=x.clientWidth/2,b.y=x.clientHeight/2,t=0;t<a;t++){var n=new W;F.push(n),z.push([n.x*v,n.y*v])}var o=[];for(t=0;t<I.length;t++)3==o.length&&(q.push(o),o=[]),o.push(I[t]);for(t=0;t<F.length;t++)for(i=0;i<q.length;i++)-1!==q[i].indexOf(t)&&q[i].forEach(function(i,h,e){i!==t&&-1==F[t].neighbors.indexOf(i)&&F[t].neighbors.push(i)});if(d)for(t=0;t<s;t++)R.push(new B);!function t(){requestAnimFrame(t),e(),h()}()}()}
